<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS Engine: Detailed Technical Analysis of the ECS Engine:</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ECS Engine<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A performant Entity Component System (ECS) engine implemented in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_ECS.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Detailed Technical Analysis of the ECS Engine:</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md20"></a></p><ol type="1">
<li><b>Core Architecture</b></li>
</ol>
<ul>
<li>Based on unique identifiers (Entity) using <code>uint32_t</code></li>
<li>Templates used for component generalization</li>
<li>Signatures implemented via <code>std::bitset&lt;64&gt;</code> for highly efficient binary mapping</li>
<li>Memory management through smart pointers (<code>unique_ptr</code>, <code>shared_ptr</code>)</li>
</ul>
<ol type="1">
<li><b>Entity Management (<a class="el" href="classEntityManager.html" title="Manages the creation and destruction of entities.">EntityManager</a>)</b></li>
</ol>
<ul>
<li>Entity pool with recycling using <code>std::queue&lt;Entity&gt;</code></li>
<li>Maximum capacity of 5000 entities configured in <code><a class="el" href="Types_8hpp.html" title="Core type definitions for the ECS framework.">Types.hpp</a></code></li>
<li>Signatures stored in a static array <code>std::array&lt;Signature, MAX_ENTITIES&gt;</code></li>
<li>Live entity tracking via <code>livingEntityCount</code></li>
<li>O(1) methods for creation/destruction</li>
</ul>
<ol type="1">
<li><b>Component <a class="el" href="classSystem.html" title="Base class for all systems in the ECS architecture.">System</a></b></li>
</ol>
<ul>
<li><b>Storage (<a class="el" href="classComponentStorage.html" title="Stores component data for entities using an unordered map.">ComponentStorage</a>)</b><ul>
<li>Generic template <code><a class="el" href="classComponentStorage.html" title="Stores component data for entities using an unordered map.">ComponentStorage</a>&lt;T&gt;</code></li>
<li>Uses <code>unordered_map&lt;Entity, T&gt;</code> for O(1) access</li>
<li>Abstract interface via <code><a class="el" href="classAComponentStorage.html" title="Abstract base class for component arrays.">AComponentStorage</a></code></li>
<li>Polymorphism for uniform management</li>
</ul>
</li>
<li><b><a class="el" href="classComponentManager.html" title="Manages component arrays and types.">ComponentManager</a> Overview</b><ul>
<li>Assigns unique IDs to component types using <code>ComponentTypeID</code></li>
<li>Maintains two mappings:<ul>
<li><code>unordered_map&lt;type_index, ComponentTypeID&gt;</code> for type-to-ID mapping</li>
<li><code>unordered_map&lt;type_index, shared_ptr&lt;<a class="el" href="classAComponentStorage.html" title="Abstract base class for component arrays.">AComponentStorage</a>&gt;&gt;</code> for type-to-storage mapping</li>
</ul>
</li>
<li>Uses <code>type_index</code> for identifying component types</li>
<li>Supports dynamic registration of new components</li>
</ul>
</li>
</ul>
<ol type="1">
<li><b><a class="el" href="classSystem.html" title="Base class for all systems in the ECS architecture.">System</a> Management (<a class="el" href="classSystemManager.html" title="Manages systems and their component signatures.">SystemManager</a>)</b></li>
</ol>
<ul>
<li>Systems stored via <code>unordered_map&lt;type_index, shared_ptr&lt;<a class="el" href="classSystem.html" title="Base class for all systems in the ECS architecture.">System</a>&gt;&gt;</code></li>
<li>Associated signatures in <code>unordered_map&lt;type_index, Signature&gt;</code></li>
<li>Entity filtering by signature matching: <div class="fragment"><div class="line">(entitySignature &amp; systemSignature) == systemSignature</div>
</div><!-- fragment --></li>
<li>Relevant entities cached in <code>std::set</code></li>
</ul>
<ol type="1">
<li><b><a class="el" href="classCoordinator.html" title="Coordinates entities, components, and systems.">Coordinator</a></b></li>
</ol>
<ul>
<li>Facade pattern for the public API</li>
<li>Deferred destruction management via <code>entitiesToDestroy</code></li>
<li>Unified interface for all operations</li>
<li>Component validity checks</li>
<li>Dependency management between systems</li>
</ul>
<ol type="1">
<li><b>Technical Optimizations</b></li>
</ol>
<ul>
<li>Use of references to avoid copies</li>
<li>Move semantics for component transfers</li>
<li>Bitwise operations for signature matching</li>
<li>Cache-friendly with contiguous structures</li>
</ul>
<ol type="1">
<li><b>Advanced Features</b></li>
</ol>
<ul>
<li>Support for multi-component queries</li>
<li>Component pair validation</li>
<li>Deferred destruction to avoid invalidations</li>
<li>Extensibility through templates</li>
</ul>
<p>This implementation is designed for efficiency and flexibility. Most operations are O(1), ensuring high performance. The use of templates and polymorphism allows for adaptability, while the modular design promotes scalability and maintainability.</p>
<p><br  />
</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Algorithmic Complexity for Major ECS Operations</h1>
<h3><a class="anchor" id="autotoc_md22"></a>
EntityManager.hpp</h3>
<p><b>O(1) Operations:</b></p><ul>
<li><code>createEntity()</code> : O(1) - Uses <code>queue.front()</code> and <code>queue.pop()</code></li>
<li><code>destroyEntity()</code> : O(1) - Resets the bitset and <code>queue.push()</code></li>
<li><code>setSignature()</code> : O(1) - Direct array access via index</li>
<li><code>getSignature()</code> : O(1) - Direct array access via index</li>
</ul>
<p><b>O(n) Operations:</b></p><ul>
<li><code>getEntities()</code> : O(n) - Iterates over <code>MAX_ENTITIES</code> to construct the vector</li>
</ul>
<h3><a class="anchor" id="autotoc_md23"></a>
ComponentManager.hpp</h3>
<p><b>O(1) Operations:</b></p><ul>
<li><code>registerComponent&lt;T&gt;()</code> : O(1) - Inserts into <code>unordered_map</code></li>
<li><code>addComponent&lt;T&gt;()</code> : O(1) - Inserts into <code><a class="el" href="classComponentStorage.html" title="Stores component data for entities using an unordered map.">ComponentStorage</a></code></li>
<li><code>removeComponent&lt;T&gt;()</code> : O(1) - Removes from <code>unordered_map</code></li>
<li><code>getComponent&lt;T&gt;()</code> : O(1) - Direct access via <code>unordered_map</code></li>
<li><code>getComponentTypeID&lt;T&gt;()</code> : O(1) - Lookup in <code>unordered_map</code></li>
</ul>
<p><b>O(m) Operations:</b> (where m = number of component types)</p><ul>
<li><code>entityDestroyed()</code> : O(m) - Iterates over all <code>ComponentStorages</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md24"></a>
SystemManager.hpp</h3>
<p><b>O(1) Operations:</b></p><ul>
<li><code>registerSystem&lt;T&gt;()</code> : O(1) - Inserts into <code>unordered_map</code></li>
<li><code>getSystem&lt;T&gt;()</code> : O(1) - Direct access via <code>unordered_map</code></li>
<li><code>setSignature()</code> : O(1) - Inserts into <code>unordered_map</code></li>
</ul>
<p><b>O(s) Operations:</b> (where s = number of systems)</p><ul>
<li><code>entityDestroyed()</code> : O(s) - Iterates over all systems</li>
<li><code>entitySignatureChanged()</code> : O(s) - Iterates over all systems</li>
</ul>
<h3><a class="anchor" id="autotoc_md25"></a>
ComponentStorage.hpp</h3>
<p><b>All operations are O(1):</b></p><ul>
<li><code>insertData()</code> : O(1) - Inserts into <code>unordered_map</code></li>
<li><code>removeData()</code> : O(1) - Removes from <code>unordered_map</code></li>
<li><code>getData()</code> : O(1) - Direct access via <code>unordered_map</code></li>
<li><code>hasData()</code> : O(1) - Lookup in <code>unordered_map</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md26"></a>
Coordinator.hpp</h3>
<p><b>Inherited O(1) Operations:</b></p><ul>
<li><code>createEntity()</code>, <code>addComponent()</code>, <code>removeComponent()</code>, <code>getComponent()</code></li>
</ul>
<p><b>Composite Operations:</b></p><ul>
<li><code>destroyEntity()</code> : O(1) - Simple <code>push_back</code> into vector</li>
<li><code>processEntityDestruction()</code> : O(n + m + s) where:<ul>
<li>n = number of entities to destroy</li>
<li>m = number of component types</li>
<li>s = number of systems</li>
</ul>
</li>
</ul>
<p><b>Validation Operations:</b></p><ul>
<li><code>hasComponent()</code> : O(1) - Bit test in signature</li>
<li><code>hasComponentPair()</code> : O(1) - Two calls to <code>hasComponent</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md27"></a>
Performance Critical Points:</h3>
<ol type="1">
<li><b>Signature Management:</b> <div class="fragment"><div class="line">(entitySignature &amp; systemSignature) == systemSignature  <span class="comment">// O(1) - bitwise operation</span></div>
</div><!-- fragment --></li>
<li><b>Component Storage:</b> <div class="fragment"><div class="line">std::unordered_map&lt;Entity, T&gt; componentMap;  <span class="comment">// Average O(1) access</span></div>
</div><!-- fragment --></li>
<li><b>Cache Optimization:</b> <div class="fragment"><div class="line">std::array&lt;Signature, MAX_ENTITIES&gt; signatures{};  <span class="comment">// Contiguous memory</span></div>
</div><!-- fragment --> The overall system complexity is optimized for common operations (O(1) for most entity and component interactions), with some more expensive operations during entity destruction or system updates.</li>
</ol>
<h2><a class="anchor" id="autotoc_md28"></a>
Conclusion</h2>
<p>This implementation might not be the most optimal or exhaustive, it has proven sufficient for the needs of my project so I decided to keep it as is. <br  />
 Hope this helps you understand my implementation of the ECS engine and the design choices I made. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Apr 11 2025 16:24:46 for ECS Engine by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
